<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NFT JSON Viewer</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #fafafa; }
    h1 { margin-bottom: 20px; }
    .container { display: flex; gap: 20px; }
    .list { width: 260px; height: 90vh; overflow-y: auto; background: white; padding: 10px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
    .btn { padding: 5px 8px; border-radius: 6px; text-decoration: none; color: white; font-size: 12px; }
    .view { background: #007bff; }
    .open { background: #28a745; }
    pre { background: #111; color: #0f0; padding: 15px; border-radius: 8px; overflow-x: auto; width: 100%; height: 90vh; }
    img { max-width: 300px; margin-top: 15px; border-radius: 8px; }
  </style>
</head>
<body>
  <h1>NFT Metadata JSON Browser</h1>
  <div class="container">
    
    <div class="list" id="jsonList"></div>

    <div>
      <pre id="jsonViewer">Klik "VIEW" pada nomor JSON untuk melihat metadata...</pre>
      <div id="imageContainer"></div>
    </div>
    
  </div>

  <script>
    const TOTAL = 4444; // jumlah NFT kamu
    const list = document.getElementById("jsonList");
    const viewer = document.getElementById("jsonViewer");
    const imageBox = document.getElementById("imageContainer");

    function loadList() {
      for (let i = 1; i <= TOTAL; i++) {

        const row = document.createElement("div");
        row.className = "item";

        // tombol VIEW
        const viewBtn = document.createElement("a");
        viewBtn.textContent = `VIEW`;
        viewBtn.className = "btn view";
        viewBtn.href = `/#${i}`;
        viewBtn.onclick = (e) => {
          e.preventDefault();
          loadJSON(i);
        };

        // tombol OPEN JSON asli
        const openBtn = document.createElement("a");
        openBtn.textContent = `OPEN`;
        openBtn.className = "btn open";
        openBtn.href = `/public/${i}.json`;
        openBtn.target = "_blank";

        row.innerHTML = `${i}.json`;
        row.appendChild(viewBtn);
        row.appendChild(openBtn);

        list.appendChild(row);
      }
    }

    async function loadJSON(id) {
      const url = `/public/${id}.json`;

      viewer.textContent = "Loading...";
      imageBox.innerHTML = "";

      try {
        const res = await fetch(url);
        const json = await res.json();
        viewer.textContent = JSON.stringify(json, null, 2);

        // jika ada field "image"
        if (json.image) {
          const img = document.createElement("img");
          img.src = json.image;
          imageBox.appendChild(img);
        }
      } catch (e) {
        viewer.textContent = "Gagal memuat JSON.";
      }
    }

    loadList();
  </script>

</body>
</html>
