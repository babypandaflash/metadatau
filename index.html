<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>JSON Metadata Viewer</title>
<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
    }
    .json-list a {
        display: block;
        text-decoration: none;
        padding: 8px;
        margin-bottom: 5px;
        background: #f0f0f0;
        border-radius: 5px;
        color: #000;
    }
    .json-list a:hover {
        background: #ddd;
    }
    #viewer {
        margin-top: 20px;
        padding: 15px;
        background: #fafafa;
        border: 1px solid #ccc;
        border-radius: 6px;
    }
    img.preview {
        width: 300px;
        border-radius: 10px;
        margin-bottom: 10px;
    }
</style>
</head>
<body>

<h2>JSON Metadata Viewer</h2>

<div class="json-list" id="jsonList"></div>

<div id="viewer"></div>

<script>
const TOTAL = 4444;

function loadList() {
    const container = document.getElementById("jsonList");
    for (let i = 1; i <= TOTAL; i++) {
        const link = document.createElement("a");
        link.href = `#${i}`;
        link.textContent = `Open ${i}.json`;
        link.onclick = () => loadJSON(i);
        container.appendChild(link);
    }
}

async function loadJSON(id) {
    const viewer = document.getElementById("viewer");
    viewer.innerHTML = "Loading...";

    try {
        // FILE PUBLIC DI VERSEL BISA DIAKSES LANGSUNG DARI ROOT
        const res = await fetch(`/${id}.json`);
        if (!res.ok) throw new Error("File not found");

        const json = await res.json();

        let html = "";

        // Jika ada image
        if (json.image) {
            html += `<img class="preview" src="${json.image}" alt="image" />`;
        }

        // Semua metadata
        html += `<pre>${JSON.stringify(json, null, 2)}</pre>`;

        viewer.innerHTML = html;
    } catch (err) {
        viewer.innerHTML = "Gagal memuat JSON.";
    }
}

// Jika ada hash di URL (misal domain.com/#12)
window.onload = () => {
    loadList();
    const id = location.hash.replace("#", "");
    if (id) loadJSON(id);
};
</script>

</body>
</html>
